<!DOCTYPE html>
<html lang="bg">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>–ó–∞ –î–µ–Ω–∏—Ü–∞ ‚ú®</title>
<style>
    :root { --p: #ff0080; --s: #ff66cc; --gold: #ffd700; }
    
    body, html { 
        margin: 0; padding: 0; width: 100%; height: 100dvh; 
        overflow: hidden; background: #000; 
        font-family: -apple-system, system-ui, sans-serif;
        touch-action: none; transition: background 2s ease;
    }

    #instruction {
        position: absolute; top: 10%; width: 100%; text-align: center;
        color: white; font-size: 20px; font-weight: 300; padding: 0 20px;
        box-sizing: border-box; z-index: 1000; text-shadow: 0 0 10px var(--p);
    }

    .element {
        position: absolute; transform: translate(-50%, -50%) scale(0);
        cursor: pointer; border: none; background: none;
        -webkit-tap-highlight-color: transparent; 
        transition: transform 0.6s ease, opacity 0.5s;
        z-index: 500;
    }

    /* –°—Ü–µ–Ω–∞ 1 */
    #bigHeart { font-size: 110px; animation: beat 1.5s infinite; }
    .small-heart { font-size: 45px; }

    /* –§–∏–Ω–∞–ª–µ–Ω –°–ª–∞–π–¥ - –¶–µ–Ω—Ç—Ä–∏—Ä–∞–Ω */
    #finalStage {
        position: absolute; top: 50%; left: 50%;
        transform: translate(-50%, -50%) scale(0);
        width: 100%; text-align: center;
        z-index: 1000; transition: transform 1.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        display: flex; flex-direction: column; align-items: center; justify-content: center;
    }

    #finalMsg {
        font-size: 42px; font-weight: 900; margin-bottom: 20px;
        background: linear-gradient(90deg, #fff, var(--gold), var(--p), #fff);
        background-size: 200% auto; -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        animation: shine 3s linear infinite;
    }

    #lastHeart { font-size: 120px; animation: beat 1.2s infinite; filter: drop-shadow(0 0 20px var(--p)); }

    @keyframes beat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.15); } }
    @keyframes shine { to { background-position: 200% center; } }
    .particle { position: absolute; pointer-events: none; z-index: 2000; }
    .falling-star { position: absolute; font-size: 50px; z-index: 600; cursor: pointer; transform: translate(-50%, -50%); }

</style>
</head>
<body>

<div id="instruction">–ó–¥—Ä–∞–≤–µ–π –î–µ–Ω–∏, –∑–∞ –¥–∞ –∑–∞–ø–æ—á–Ω–µ–º —â–µ —Ç—Ä—è–±–≤–∞ –¥–∞ –∏–∑–±–µ—Ä–µ—à –Ω–∞–π-–≥–æ–ª—è–º–æ—Ç–æ —Å—ä—Ä—Ü–µ</div>

<div id="scene1">
    <button class="element small-heart" style="top:25%; left:20%">‚ù§Ô∏è</button>
    <button class="element small-heart" style="top:75%; left:85%">‚ù§Ô∏è</button>
    <button id="bigHeart" class="element" style="top:50%; left:50%">‚ù§Ô∏è</button>
    <button class="element small-heart" style="top:20%; left:80%">‚ù§Ô∏è</button>
    <button class="element small-heart" style="top:85%; left:15%">‚ù§Ô∏è</button>
</div>

<div id="finalStage">
    <div id="finalMsg">–û–ë–ò–ß–ê–ú –¢–ï –°–õ–™–ù–¶–ï! üíñ</div>
    <div id="lastHeart">‚ù§Ô∏è</div>
</div>

<script>
    const instr = document.getElementById('instruction');
    const finalStage = document.getElementById('finalStage');
    const scene1 = document.getElementById('scene1');
    
    let starCount = 0;
    let roseCount = 0;

    // –ü–æ–∫–∞–∑–≤–∞–Ω–µ –Ω–∞ –ø—ä—Ä–≤–∞—Ç–∞ —Å—Ü–µ–Ω–∞
    setTimeout(() => {
        document.querySelectorAll('#scene1 .element').forEach(el => el.style.transform = 'translate(-50%, -50%) scale(1)');
    }, 500);

    // --- 1. –ì–û–õ–Ø–ú–û–¢–û –°–™–†–¶–ï ---
    document.getElementById('bigHeart').onclick = function() {
        burst(window.innerWidth/2, window.innerHeight/2, 'üíñ', 30);
        scene1.innerHTML = ''; // –ò–∑—á–∏—Å—Ç–≤–∞ –≤—Å–∏—á–∫–æ –æ—Ç –°—Ü–µ–Ω–∞ 1
        
        setTimeout(() => {
            instr.innerText = '–ì—É—à–Ω–∏ –ù–∏–Ω–æ –∑–∞ –¥–∞ –ø—Ä–æ–¥—ä–ª–∂–∏—à';
            const nino = document.createElement('button');
            nino.innerHTML = 'üß∏';
            nino.className = 'element';
            nino.style.cssText = 'top:50%; left:50%; font-size:120px; transform:translate(-50%, -50%) scale(1);';
            document.body.appendChild(nino);

            nino.onclick = () => {
                burst(window.innerWidth/2, window.innerHeight/2, '‚ú®', 40);
                nino.remove(); // –ü—Ä–µ–º–∞—Ö–≤–∞ –ù–∏–Ω–æ
                startStars();
            };
        }, 800);
    };

    // --- 2. –ó–í–ï–ó–î–ò–¢–ï ---
    function startStars() {
        instr.innerText = '–£–ª–æ–≤–∏ 5 –ø–∞–¥–∞—â–∏ –∑–≤–µ–∑–¥–∏...';
        document.body.style.background = '#1a0033';
        spawnStar();
    }

    function spawnStar() {
        if(starCount >= 5) {
            setTimeout(startRoses, 800);
            return;
        }
        const s = document.createElement('div');
        s.innerHTML = '‚≠ê';
        s.className = 'falling-star';
        s.style.left = (10 + Math.random() * 80) + '%';
        s.style.top = '-50px';
        document.body.appendChild(s);

        let pos = -50;
        const fall = setInterval(() => {
            pos += 4;
            s.style.top = pos + 'px';
            if(pos > window.innerHeight) {
                clearInterval(fall);
                if(s.parentElement) s.remove();
                spawnStar();
            }
        }, 10);

        s.onclick = () => {
            clearInterval(fall);
            starCount++;
            burst(s.offsetLeft + 25, s.offsetTop + 25, '‚ú®', 15);
            s.remove();
            spawnStar();
        };
    }

    // --- 3. –†–û–ó–ò–¢–ï ---
    function startRoses() {
        instr.innerText = '–°—ä–±–µ—Ä–∏ 5 —Ä–æ–∑–∏ –æ—Ç –ø–æ–ª—è–Ω–∞—Ç–∞...';
        document.body.style.background = 'radial-gradient(circle, #2b002b, #000)';
        spawnRose();
    }

    function spawnRose() {
        if(roseCount >= 5) {
            setTimeout(showFinal, 800);
            return;
        }
        const r = document.createElement('button');
        r.innerHTML = 'üåπ';
        r.className = 'element';
        r.style.cssText = `left:${20+Math.random()*60}%; top:${30+Math.random()*40}%; font-size:70px;`;
        document.body.appendChild(r);
        setTimeout(() => r.style.transform = 'translate(-50%, -50%) scale(1)', 50);

        r.onclick = () => {
            roseCount++;
            burst(r.offsetLeft, r.offsetTop, 'üå∏', 20);
            r.remove();
            spawnRose();
        };
    }

    // --- 4. –§–ò–ù–ê–õ ---
    function showFinal() {
        instr.style.display = 'none';
        document.body.style.background = 'radial-gradient(circle, #450021, #000)';
        
        finalStage.style.transform = 'translate(-50%, -50%) scale(1)';
        
        // –ú–∞–≥–∏—è –Ω–∞ —Ñ–∏–Ω–∞–ª–∞
        setInterval(() => {
            const x = Math.random() * window.innerWidth;
            const y = Math.random() * window.innerHeight;
            burst(x, y, ['‚ù§Ô∏è','üíñ','‚ú®'][Math.floor(Math.random()*3)], 1);
        }, 150);
    }

    function burst(x, y, char, count) {
        for(let i=0; i<count; i++) {
            const p = document.createElement('div');
            p.className = 'particle';
            p.innerHTML = char;
            p.style.left = x + 'px'; p.style.top = y + 'px';
            document.body.appendChild(p);
            const a = Math.random() * Math.PI * 2;
            const d = 40 + Math.random() * 120;
            p.animate([
                { transform: 'translate(0,0) scale(1)', opacity: 1 },
                { transform: `translate(${Math.cos(a)*d}px, ${Math.sin(a)*d}px) scale(0)`, opacity: 0 }
            ], { duration: 1200, easing: 'ease-out' }).onfinish = () => p.remove();
        }
    }

    document.addEventListener('touchstart', (e) => {
        burst(e.touches[0].clientX, e.touches[0].clientY, '‚ú®', 3);
    });
</script>
</body>
</html>
