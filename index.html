<!DOCTYPE html>
<html lang="bg">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>–ó–∞ –î–µ–Ω–∏—Ü–∞ ‚ú®</title>
<style>
    :root { --p: #ff0080; --s: #ff66cc; --gold: #ffd700; --deep: #1a001a; }
    
    body, html { 
        margin: 0; padding: 0; width: 100%; height: 100dvh; 
        overflow: hidden; background: #000; 
        font-family: 'Helvetica Neue', sans-serif;
        touch-action: none; transition: background 4s ease-in-out;
    }

    #fx-layer { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; pointer-events: none; }
    
    #instruction {
        position: absolute; top: 10%; width: 100%; text-align: center;
        color: white; font-size: 16px; font-weight: 200; letter-spacing: 4px;
        z-index: 100; text-transform: uppercase; opacity: 0;
        transition: 2s; text-shadow: 0 0 10px var(--p);
    }

    .element {
        position: absolute; transform: translate(-50%, -50%) scale(0);
        cursor: pointer; border: none; background: none;
        -webkit-tap-highlight-color: transparent; transition: all 2s cubic-bezier(0.19, 1, 0.22, 1);
        z-index: 50; filter: drop-shadow(0 0 10px rgba(255,255,255,0.3));
    }

    #final-stage {
        position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0);
        width: 90%; text-align: center; z-index: 200; transition: 3s;
    }

    #final-msg {
        font-size: 38px; font-weight: 900; line-height: 1.2;
        background: linear-gradient(90deg, #fff, var(--gold), #fff, var(--s), #fff);
        background-size: 200% auto; -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        animation: shine 5s linear infinite;
    }

    @keyframes shine { to { background-position: 200% center; } }
    @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }
    
    .glow-bg { animation: glowMove 8s infinite alternate; }
    @keyframes glowMove { 
        from { background: radial-gradient(circle at 20% 30%, #2b002b 0%, #000 100%); }
        to { background: radial-gradient(circle at 80% 70%, #1a0033 0%, #000 100%); }
    }
</style>
</head>
<body class="glow-bg">

<div id="fx-layer"></div>
<div id="instruction" style="opacity: 1;">–î–æ–∫–æ—Å–Ω–∏ —Å—ä—Ä—Ü–µ—Ç–æ, –∑–∞ –¥–∞ –∑–∞–ø–æ—á–Ω–µ –º–∞–≥–∏—è—Ç–∞...</div>

<button id="step1" class="element" style="top: 50%; left: 50%; font-size: 100px; transform: translate(-50%, -50%) scale(1);">‚ù§Ô∏è</button>
<button id="step2L" class="element" style="top: 50%; left: 25%; font-size: 80px;">üß∏</button>
<button id="step2R" class="element" style="top: 50%; left: 75%; font-size: 80px;">üß∏</button>
<div id="star-field"></div>
<button id="step4" class="element" style="top: 50%; left: 50%; font-size: 90px;">üåπ</button>

<div id="final-stage">
    <div id="final-msg">–û–ë–ò–ß–ê–ú –¢–ï, –°–õ–™–ù–¶–ï! üíñ<br><span style="font-size: 20px; font-weight: 300; letter-spacing: 2px;">–¢–∏ —Å–∏ –º–æ–µ—Ç–æ –≤—Å–∏—á–∫–æ!</span></div>
</div>

<script>
    const instr = document.getElementById('instruction');
    const fx = document.getElementById('fx-layer');
    const step1 = document.getElementById('step1');
    const step2L = document.getElementById('step2L');
    const step2R = document.getElementById('step2R');
    const step4 = document.getElementById('step4');
    const final = document.getElementById('final-stage');
    
    let starCount = 0;

    // --- –°–¶–ï–ù–ê 1 ---
    step1.onclick = () => {
        step1.style.transform = 'translate(-50%, -50%) scale(0) rotate(180deg)';
        burst(window.innerWidth/2, window.innerHeight/2, 'üíñ', 25);
        
        setTimeout(() => {
            instr.style.opacity = 0;
            setTimeout(() => {
                instr.innerText = '–ú–µ—á–µ—Ç–∞—Ç–∞ –Ω–æ—Å—è—Ç –Ω–µ–∂–Ω–æ—Å—Ç... –¥–æ–∫–æ—Å–Ω–∏ –≥–∏';
                instr.style.opacity = 1;
                step2L.style.transform = 'translate(-50%, -50%) scale(1)';
                step2R.style.transform = 'translate(-50%, -50%) scale(1)';
            }, 1000);
        }, 1500);
    };

    // --- –°–¶–ï–ù–ê 2 ---
    const act2 = () => {
        step2L.style.transform = 'translate(-50%, -50%) scale(0)';
        step2R.style.transform = 'translate(-50%, -50%) scale(0)';
        document.body.style.background = '#1a0033';
        burst(window.innerWidth/2, window.innerHeight/2, '‚ú®', 40);

        setTimeout(() => {
            instr.innerText = '–£–ª–æ–≤–∏ 5 –ø–∞–¥–∞—â–∏ –∑–≤–µ–∑–¥–∏...';
            spawnStar();
        }, 2000);
    };
    step2L.onclick = act2;
    step2R.onclick = act2;

    // --- –°–¶–ï–ù–ê 3 ---
    function spawnStar() {
        if(starCount >= 5) {
            act4();
            return;
        }
        const s = document.createElement('button');
        s.className = 'element';
        s.innerHTML = '‚≠ê';
        s.style.left = (15 + Math.random() * 70) + '%';
        s.style.top = '-10%';
        s.style.fontSize = '50px';
        document.body.appendChild(s);
        
        setTimeout(() => {
            s.style.top = (20 + Math.random() * 60) + '%';
            s.style.transform = 'translate(-50%, -50%) scale(1)';
        }, 100);

        s.onclick = () => {
            starCount++;
            burst(parseInt(s.style.left), parseInt(s.style.top), '‚ú®', 10);
            s.remove();
            spawnStar();
        };
    }

    // --- –°–¶–ï–ù–ê 4 ---
    function act4() {
        instr.innerText = '–ü–æ—Å–ª–µ–¥–Ω–æ—Ç–æ —Ü–≤–µ—Ç–µ –∑–∞ —Ç–µ–±...';
        step4.style.transform = 'translate(-50%, -50%) scale(1.5)';
        step4.style.animation = 'float 3s infinite ease-in-out';
    }

    step4.onclick = () => {
        step4.style.transform = 'translate(-50%, -50%) scale(10)';
        step4.style.opacity = 0;
        document.body.style.background = 'radial-gradient(circle, #450021, #000)';
        
        setTimeout(() => {
            instr.style.display = 'none';
            final.style.transform = 'translate(-50%, -50%) scale(1)';
            infiniteMagic();
        }, 1500);
    };

    // --- –ï–§–ï–ö–¢–ò ---
    function burst(x, y, char, count) {
        for(let i=0; i<count; i++) {
            const p = document.createElement('div');
            p.style.position = 'absolute';
            p.style.left = x + 'px'; p.style.top = y + 'px';
            p.innerHTML = char;
            p.style.zIndex = 300;
            p.style.pointerEvents = 'none';
            document.body.appendChild(p);
            
            const a = Math.random() * Math.PI * 2;
            const d = 50 + Math.random() * 150;
            
            p.animate([
                { transform: 'translate(0,0) scale(1)', opacity: 1 },
                { transform: `translate(${Math.cos(a)*d}px, ${Math.sin(a)*d}px) scale(0)`, opacity: 0 }
            ], { duration: 2000, easing: 'ease-out' }).onfinish = () => p.remove();
        }
    }

    function infiniteMagic() {
        setInterval(() => {
            const p = document.createElement('div');
            p.style.position = 'absolute';
            p.style.left = Math.random() * 100 + 'vw';
            p.style.top = '-50px';
            p.innerHTML = ['‚ù§Ô∏è','üíñ','‚ú®','üå∏','üíé'][Math.floor(Math.random()*5)];
            p.style.fontSize = (15 + Math.random() * 20) + 'px';
            p.style.zIndex = 150;
            p.style.opacity = Math.random();
            document.body.appendChild(p);
            
            p.animate([
                { transform: 'translateY(0) rotate(0deg)' },
                { transform: `translateY(110vh) rotate(${Math.random()*360}deg)` }
            ], { duration: 4000 + Math.random()*3000 }).onfinish = () => p.remove();
        }, 150);
    }

    // –¢—ä—á –µ—Ñ–µ–∫—Ç
    document.addEventListener('touchstart', (e) => {
        const t = e.touches[0];
        burst(t.clientX, t.clientY, '‚ú®', 3);
    });
</script>
</body>
</html>
