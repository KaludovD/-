<!DOCTYPE html>
<html lang="bg">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>–ó–∞ –º–æ–µ—Ç–æ –°–ª—ä–Ω—Ü–µ ‚ù§Ô∏è</title>
<style>
    :root { --p: #ff0080; --s: #ff66cc; --gold: #ffd700; }
    
    body, html { 
        margin: 0; padding: 0; width: 100%; height: 100dvh; 
        overflow: hidden; background: #000; 
        font-family: -apple-system, system-ui, sans-serif;
        touch-action: none; transition: background 2s ease;
    }

    /* –§–æ–Ω –∏ —á–∞—Å—Ç–∏—Ü–∏ */
    #bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }
    .particle { position: absolute; pointer-events: none; z-index: 50; }

    /* –ù–∞—Å–æ–∫–∏ */
    #instruction {
        position: absolute; top: 15%; width: 100%; text-align: center;
        color: white; font-size: 20px; font-weight: 300; letter-spacing: 2px;
        z-index: 100; text-shadow: 0 0 10px var(--p);
        animation: breath 2s infinite;
    }

    /* –û–±–µ–∫—Ç–∏ */
    .game-obj {
        position: absolute; transform: translate(-50%, -50%);
        cursor: pointer; border: none; background: none;
        -webkit-tap-highlight-color: transparent; transition: all 0.5s ease;
    }

    #mainHeart { top: 50%; left: 50%; font-size: 100px; animation: beat 1.2s infinite; }
    .teddy { bottom: -150px; font-size: 80px; display: none; }
    #flower { top: 50%; left: 50%; font-size: 90px; display: none; transform: translate(-50%, -50%) scale(0); }

    /* –§–∏–Ω–∞–ª–µ–Ω –Ω–∞–¥–ø–∏—Å */
    #finalMsg {
        position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0);
        width: 100%; text-align: center; display: none;
        font-size: 45px; font-weight: 900; z-index: 200;
        background: linear-gradient(90deg, #fff, var(--gold), var(--p), #fff);
        background-size: 200% auto; -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    }

    /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
    @keyframes beat { 0%, 100% { transform: translate(-50%, -50%) scale(1); } 50% { transform: translate(-50%, -50%) scale(1.15); } }
    @keyframes breath { from { opacity: 0.4; } to { opacity: 1; } }
    @keyframes rainbow { to { background-position: 200% center; } }
    @keyframes infiniteRotate { from { transform: translate(-50%, -50%) rotate(0deg); } to { transform: translate(-50%, -50%) rotate(360deg); } }

    .infinite-glow { animation: rainbow 3s linear infinite, glowPulse 2s infinite alternate; }
    @keyframes glowPulse { from { filter: drop-shadow(0 0 10px var(--p)); } to { filter: drop-shadow(0 0 30px var(--s)); } }

</style>
</head>
<body>

<div id="bg"></div>
<div id="instruction">–î–û–ö–û–°–ù–ò –°–™–†–¶–ï–¢–û, –ó–ê –î–ê –ó–ê–ü–û–ß–ù–ï–ú...</div>

<button id="mainHeart" class="game-obj">‚ù§Ô∏è</button>
<button id="teddyL" class="game-obj teddy" style="left: 25%;">üß∏</button>
<button id="teddyR" class="game-obj teddy" style="left: 75%;">üß∏</button>
<button id="flower" class="game-obj">üåπ</button>

<div id="finalMsg">–û–ë–ò–ß–ê–ú –¢–ï, –°–õ–™–ù–¶–ï! üíñ</div>

<script>
    const instr = document.getElementById('instruction');
    const heart = document.getElementById('mainHeart');
    const teddyL = document.getElementById('teddyL');
    const teddyR = document.getElementById('teddyR');
    const flower = document.getElementById('flower');
    const finalMsg = document.getElementById('finalMsg');
    const body = document.body;

    // --- –ï–¢–ê–ü 1: –°–™–†–¶–ï–¢–û ---
    heart.onclick = () => {
        heart.style.transform = 'translate(-50%, -50%) scale(0)';
        createExplosion(window.innerWidth/2, window.innerHeight/2, 'üíñ', 30);
        
        setTimeout(() => {
            heart.style.display = 'none';
            instr.innerText = '–°–ï–ì–ê –ò–ó–ë–ï–†–ò –ï–î–ù–û –ú–ï–ß–ï...';
            teddyL.style.display = 'block';
            teddyR.style.display = 'block';
            setTimeout(() => {
                teddyL.style.bottom = '30%';
                teddyR.style.bottom = '30%';
            }, 100);
        }, 600);
    };

    // --- –ï–¢–ê–ü 2: –ú–ï–ß–ï–¢–ê–¢–ê ---
    const teddyAction = () => {
        body.style.background = 'radial-gradient(circle at center, #4b0082 0%, #000 100%)';
        createExplosion(window.innerWidth/2, window.innerHeight/2, '‚ú®', 40);
        teddyL.style.transform = 'scale(0)';
        teddyR.style.transform = 'scale(0)';
        
        setTimeout(() => {
            teddyL.style.display = 'none';
            teddyR.style.display = 'none';
            instr.innerText = '–ù–ï–©–û –ü–†–ï–ö–†–ê–°–ù–û –ü–û–ù–ò–ö–í–ê –ó–ê –¢–ï–ë...';
            flower.style.display = 'block';
            setTimeout(() => { flower.style.transform = 'translate(-50%, -50%) scale(1.5)'; }, 100);
        }, 1000);
    };

    teddyL.onclick = teddyAction;
    teddyR.onclick = teddyAction;

    // --- –ï–¢–ê–ü 3: –¶–í–ï–¢–ï–¢–û ---
    flower.onclick = () => {
        flower.style.transform = 'translate(-50%, -50%) scale(5) rotate(360deg)';
        flower.style.opacity = '0';
        
        setTimeout(() => {
            flower.style.display = 'none';
            instr.style.display = 'none';
            body.style.background = 'radial-gradient(circle at center, #2b002b 0%, #000 100%)';
            
            // –§–ò–ù–ê–õ
            finalMsg.style.display = 'block';
            setTimeout(() => {
                finalMsg.style.transform = 'translate(-50%, -50%) scale(1)';
                finalMsg.classList.add('infinite-glow');
                startInfiniteRain();
            }, 100);
        }, 1000);
    };

    // –ü–æ–º–æ—â–Ω–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞ –µ—Ñ–µ–∫—Ç–∏
    function createExplosion(x, y, char, count) {
        for(let i=0; i<count; i++) {
            const p = document.createElement('div');
            p.className = 'particle';
            p.innerHTML = char;
            p.style.left = x + 'px'; p.style.top = y + 'px';
            p.style.fontSize = '25px';
            document.body.appendChild(p);
            const a = Math.random() * Math.PI * 2;
            const d = 100 + Math.random() * 200;
            p.animate([
                { transform: 'translate(0,0) scale(1)', opacity: 1 },
                { transform: `translate(${Math.cos(a)*d}px, ${Math.sin(a)*d}px) scale(0)`, opacity: 0 }
            ], { duration: 1500, easing: 'ease-out' }).onfinish = () => p.remove();
        }
    }

    function startInfiniteRain() {
        setInterval(() => {
            const e = document.createElement('div');
            e.className = 'particle';
            e.innerHTML = ['‚ù§Ô∏è','‚ú®','üå∏','üíñ'][Math.floor(Math.random()*4)];
            e.style.left = Math.random() * 100 + 'vw';
            e.style.top = '-50px';
            e.style.fontSize = Math.random()*20 + 20 + 'px';
            document.body.appendChild(e);
            
            e.animate([
                { transform: 'translateY(0) rotate(0deg)', opacity: 1 },
                { transform: `translateY(110vh) rotate(${Math.random()*360}deg)`, opacity: 0.3 }
            ], { duration: 3000 + Math.random()*3000 }).onfinish = () => e.remove();
        }, 200);
    }

    // –ú–∞–≥–∏—è –ø—Ä–∏ –¥–æ–∫–æ—Å–≤–∞–Ω–µ (–≤–∏–Ω–∞–≥–∏ –∞–∫—Ç–∏–≤–Ω–∞)
    document.addEventListener('touchstart', (e) => {
        const t = e.touches[0];
        createExplosion(t.clientX, t.clientY, '‚ú®', 3);
    });
</script>
</body>
</html>
