<!DOCTYPE html>
<html lang="bg">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>–ó–∞ –î–µ–Ω–∏—Ü–∞ ‚ú®</title>
<style>
    :root { --p: #ff0080; --s: #ff66cc; --gold: #ffd700; }
    
    body, html { 
        margin: 0; padding: 0; width: 100%; height: 100dvh; 
        overflow: hidden; background: #000; 
        font-family: -apple-system, system-ui, sans-serif;
        touch-action: none; transition: background 2s ease-in-out;
    }

    /* –û–±—â–∏ —Å—Ç–∏–ª–æ–≤–µ –∑–∞ –µ–ª–µ–º–µ–Ω—Ç–∏—Ç–µ */
    .element {
        position: absolute; transform: translate(-50%, -50%) scale(0);
        cursor: pointer; border: none; background: none;
        -webkit-tap-highlight-color: transparent; 
        transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275), opacity 0.5s;
        z-index: 100;
    }

    #instruction {
        position: absolute; top: 10%; width: 100%; text-align: center;
        color: white; font-size: 18px; font-weight: 300; padding: 0 20px;
        box-sizing: border-box; z-index: 150; text-shadow: 0 0 10px var(--p);
        transition: opacity 0.5s;
    }

    /* –°—Ü–µ–Ω–∞ 1: –°—ä—Ä—Ü–∞ */
    .small-heart { font-size: 40px; }
    #bigHeart { font-size: 110px; animation: beat 1.5s infinite; }

    /* –°—Ü–µ–Ω–∞ 2: –ù–∏–Ω–æ */
    #nino { font-size: 120px; top: 50%; left: 50%; }

    /* –°—Ü–µ–Ω–∞ 3: –ó–≤–µ–∑–¥–∏ */
    .falling-star { font-size: 50px; position: absolute; z-index: 100; }

    /* –°—Ü–µ–Ω–∞ 4: –†–æ–∑–∏ */
    .rose { font-size: 60px; }

    /* –§–∏–Ω–∞–ª */
    #finalStage {
        position: absolute; top: 45%; left: 50%; transform: translate(-50%, -50%) scale(0);
        width: 100%; text-align: center; z-index: 200; transition: 2s;
    }
    #finalMsg {
        font-size: 40px; font-weight: 900;
        background: linear-gradient(90deg, #fff, var(--gold), var(--p), #fff);
        background-size: 200% auto; -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        animation: shine 3s linear infinite;
    }

    @keyframes beat { 0%, 100% { transform: translate(-50%, -50%) scale(1); } 50% { transform: translate(-50%, -50%) scale(1.1); } }
    @keyframes shine { to { background-position: 200% center; } }
    .particle { position: absolute; pointer-events: none; z-index: 300; }

</style>
</head>
<body>

<div id="instruction">–ó–¥—Ä–∞–≤–µ–π –î–µ–Ω–∏, –∑–∞ –¥–∞ –∑–∞–ø–æ—á–Ω–µ–º —â–µ —Ç—Ä—è–±–≤–∞ –¥–∞ –∏–∑–±–µ—Ä–µ—à –Ω–∞–π-–≥–æ–ª—è–º–æ—Ç–æ —Å—ä—Ä—Ü–µ</div>

<button class="element small-heart" style="top:30%; left:20%">‚ù§Ô∏è</button>
<button class="element small-heart" style="top:70%; left:80%">‚ù§Ô∏è</button>
<button id="bigHeart" class="element" style="top:50%; left:50%">‚ù§Ô∏è</button>
<button class="element small-heart" style="top:25%; left:75%">‚ù§Ô∏è</button>
<button class="element small-heart" style="top:80%; left:25%">‚ù§Ô∏è</button>

<button id="nino" class="element">üß∏</button>

<div id="finalStage">
    <div id="finalMsg">–û–ë–ò–ß–ê–ú –¢–ï –°–õ–™–ù–¶–ï! üíñ</div>
    <div id="lastHeart" style="font-size: 100px; margin-top: 20px; animation: beat 1.2s infinite;">‚ù§Ô∏è</div>
</div>

<script>
    const instr = document.getElementById('instruction');
    const bigHeart = document.getElementById('bigHeart');
    const nino = document.getElementById('nino');
    const finalStage = document.getElementById('finalStage');
    
    let starCount = 0;
    let roseCount = 0;

    // –ü–æ–∫–∞–∑–≤–∞–Ω–µ –Ω–∞ –ø—ä—Ä–≤–∏—Ç–µ —Å—ä—Ä—Ü–∞
    document.querySelectorAll('.element').forEach(el => {
        if(el.id !== 'nino' && el.id !== 'magicFlower') el.style.transform = 'translate(-50%, -50%) scale(1)';
    });

    // --- –°–¢–™–ü–ö–ê 1: –ì–û–õ–Ø–ú–û–¢–û –°–™–†–¶–ï ---
    bigHeart.onclick = () => {
        burst(window.innerWidth/2, window.innerHeight/2, 'üíñ', 30);
        document.querySelectorAll('.small-heart').forEach(h => h.style.transform = 'translate(-50%, -50%) scale(0)');
        bigHeart.style.transform = 'translate(-50%, -50%) scale(0)';
        
        setTimeout(() => {
            instr.innerText = '–ì—É—à–Ω–∏ –ù–∏–Ω–æ –∑–∞ –¥–∞ –ø—Ä–æ–¥—ä–ª–∂–∏—à';
            nino.style.transform = 'translate(-50%, -50%) scale(1)';
        }, 1000);
    };

    // --- –°–¢–™–ü–ö–ê 2: –ù–ò–ù–û ---
    nino.onclick = () => {
        burst(window.innerWidth/2, window.innerHeight/2, '‚ú®', 40);
        nino.style.transform = 'translate(-50%, -50%) scale(0)';
        document.body.style.background = '#1a0033';
        
        setTimeout(() => {
            instr.innerText = '–£–ª–æ–≤–∏ –ø–∞–¥–∞—â–∏—Ç–µ –∑–≤–µ–∑–¥–∏...';
            spawnStars();
        }, 1000);
    };

    // --- –°–¢–™–ü–ö–ê 3: –ó–í–ï–ó–î–ò ---
    function spawnStars() {
        if(starCount >= 5) {
            setTimeout(startRoseScene, 500);
            return;
        }
        const s = document.createElement('div');
        s.innerHTML = '‚≠ê';
        s.className = 'falling-star';
        s.style.left = Math.random() * 80 + 10 + '%';
        s.style.top = '-10%';
        document.body.appendChild(s);

        const anim = s.animate([
            { top: '-10%', transform: 'rotate(0deg)' },
            { top: '110%', transform: 'rotate(360deg)' }
        ], { duration: 3000, easing: 'linear' });

        s.onclick = () => {
            starCount++;
            burst(s.offsetLeft, s.offsetTop, '‚ú®', 10);
            s.remove();
            spawnStars();
        };

        anim.onfinish = () => { if(s.parentElement) s.remove(); if(starCount < 5) spawnStars(); };
    }

    // --- –°–¢–™–ü–ö–ê 4: –†–û–ó–ò ---
    function startRoseScene() {
        instr.innerText = '–°—ä–±–µ—Ä–∏ —Ä–æ–∑–∏—Ç–µ –æ—Ç –ø–æ–ª—è–Ω–∞—Ç–∞...';
        document.body.style.background = 'radial-gradient(circle, #2b002b, #000)';
        spawnRoses();
    }

    function spawnRoses() {
        if(roseCount >= 5) {
            setTimeout(showFinal, 1000);
            return;
        }
        const r = document.createElement('button');
        r.innerHTML = 'üåπ';
        r.className = 'element rose';
        r.style.left = (20 + Math.random() * 60) + '%';
        r.style.top = (30 + Math.random() * 40) + '%';
        document.body.appendChild(r);
        
        setTimeout(() => r.style.transform = 'translate(-50%, -50%) scale(1)', 50);

        r.onclick = () => {
            roseCount++;
            burst(r.offsetLeft, r.offsetTop, 'üå∏', 15);
            r.style.transform = 'translate(-50%, -50%) scale(0)';
            setTimeout(() => { r.remove(); spawnRoses(); }, 500);
        };
    }

    // --- –§–ò–ù–ê–õ ---
    function showFinal() {
        instr.style.opacity = '0';
        finalStage.style.transform = 'translate(-50%, -50%) scale(1)';
        
        setInterval(() => {
            const emojis = ['‚ù§Ô∏è', 'üíñ', '‚ú®', 'üåπ', 'üíã'];
            const e = emojis[Math.floor(Math.random()*emojis.length)];
            const x = Math.random() * window.innerWidth;
            const y = Math.random() * window.innerHeight;
            burst(x, y, e, 1);
        }, 200);

        // –ü–æ—Å—Ç–æ—è–Ω–µ–Ω –¥—ä–∂–¥
        setInterval(() => {
            const p = document.createElement('div');
            p.className = 'particle';
            p.innerHTML = '‚ù§Ô∏è';
            p.style.left = Math.random() * 100 + 'vw';
            p.style.top = '-20px';
            document.body.appendChild(p);
            p.animate([{top: '-20px'}, {top: '110vh'}], {duration: 3000}).onfinish = () => p.remove();
        }, 300);
    }

    // –ü–æ–º–æ—â–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –∑–∞ –µ–∫—Å–ø–ª–æ–∑–∏–∏
    function burst(x, y, char, count) {
        for(let i=0; i<count; i++) {
            const p = document.createElement('div');
            p.className = 'particle';
            p.innerHTML = char;
            p.style.left = x + 'px'; p.style.top = y + 'px';
            document.body.appendChild(p);
            const a = Math.random() * Math.PI * 2;
            const d = 50 + Math.random() * 100;
            p.animate([
                { transform: 'translate(0,0) scale(1)', opacity: 1 },
                { transform: `translate(${Math.cos(a)*d}px, ${Math.sin(a)*d}px) scale(0)`, opacity: 0 }
            ], { duration: 1000 }).onfinish = () => p.remove();
        }
    }

    // –ï—Ñ–µ–∫—Ç –ø—Ä–∏ –¥–æ–∫–æ—Å–≤–∞–Ω–µ
    document.addEventListener('touchstart', (e) => {
        const t = e.touches[0];
        burst(t.clientX, t.clientY, '‚ú®', 2);
    });
</script>
</body>
</html>
